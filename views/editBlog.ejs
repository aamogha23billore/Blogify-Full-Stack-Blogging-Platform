<!DOCTYPE html>
<html lang="en">
<head>
  <%- include("./partials/head") %>
  <title>Edit Blog</title>
  <!-- Quill CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
  <%- include("./partials/nav") %>

  <div class="container mt-4">
    <h2>Edit Blog</h2>

   <form action="/blog/update/<%= blog._id %>" method="POST" enctype="multipart/form-data">

      <!-- Title -->
      <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input type="text" name="title" class="form-control" value="<%= blog.title %>" required>
      </div>

      <!-- Cover Image -->
      <div class="mb-3">
        <label for="coverImage" class="form-label">Cover Image (optional)</label>
        <input type="file" name="coverImage" class="form-control">
      </div>

      <!-- Body -->
      <div class="mb-3">
        <label for="body" class="form-label">Body</label>
        <div id="editor"><%- blog.body %></div>
        <input type="hidden" name="body" id="hiddenBody">
      </div>

      <button type="submit" class="btn btn-success">Update Blog</button>
    </form>
  </div>

  <!-- Quill JS -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
    const quill = new Quill('#editor', { theme: 'snow' });

    document.querySelector("form").onsubmit = function () {
      document.querySelector("#hiddenBody").value = quill.root.innerHTML;
    }
  </script>
</body>
</html>
